{% extends 'base.html.twig' %}

{% block title %}{% trans %}item.index{% endtrans %}{% endblock %}

{% block body %}

    <h1>{% trans %}item.index{% endtrans %}</h1>

    <div class="container">
        {% if (items) %}
            {# total items count #}
            <div class="count">{% trans %}there.are{% endtrans %} {{ items.getTotalItemCount }} {% trans %}items{% endtrans %}</div>
            <div class="row">
                {% for item in items %}

                    <div class="card col-sm-12 col-md-6 col-lg-4">
                        <div class="text-center">
                        <a href="{{ path('item_show', {'id': item.id}) }}">
                            <img class="card-img-top" src="{{ asset('media/image/' ~ item.images[0] ~ '.jpg')|imagine_filter('squared_thumbnail_small') }}" alt="{{ item.title }}" alt="Card image cap">
                        </a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">{{ item.title }}</h5>
                            <ul class="list-group">
                                <li class="list-group-item">{{ item.type }}</li>
                                <li class="list-group-item">{{ item.description }}</li>
                                <li class="list-group-item">{{ item.area }}</li>
                                <li class="list-group-item">{% if (item.isForRent == 1) %}
                                        {% trans %}rent{% endtrans %}
                                    {% else %}
                                        {% trans %}sale{% endtrans %}
                                    {% endif %}
                                </li>
                                <li class="list-group-item">{{ item.price }}</li>
                                <li class="list-group-item">{{ item.roomQty }}</li>
                                <li class="list-group-item">{% if item.created.date|date("m/d/Y") == "now"|date("m/d/Y") %}
                                        {% trans %}new{% endtrans %}
                                    {% else %}
                                        {{ item.created.date|date("m/d/Y") }}
                                    {% endif %}
                                </li>
                                {% if item.location %}
                                    <li class="list-group-item">
                                        {% for field in item.location %}
                                            {{ field }}
                                        {% endfor %}
                                    </li>
                                {% endif %}
                                <li class="list-group-item">
                                    <a class="btn btn-primary"
                                       href="{{ path('item_show', {'id': item.id}) }}">{% trans %}show.item{% endtrans %}</a>
                                    {% if app.user %}
                                        {% if item.user.id == app.user.id %}
                                            <a class="btn btn-primary"
                                               href="{{ path('item_edit', {'id': item.id}) }}">{% trans %}edit.item{% endtrans %}</a>
                                            {{ include('item/_delete_form.html.twig') }}
                                        {% endif %}
                                    {% endif %}
                                </li>
                            </ul>
                        </div>
                    </div>
                {% endfor %}
            </div>
            {{ knp_pagination_render(items) }}
        {% else %}
            <span>{% trans %}no.records.found{% endtrans %}</span>
        {% endif %}
    </div>
    {% if app.user %}
        <a class="btn btn-primary" href="{{ path('item_new') }}">{% trans %}create.new.item{% endtrans %}</a>
    {% endif %}

{% endblock %}
